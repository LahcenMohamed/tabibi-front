import{a as x}from"./chunk-6IQCN6MS.js";import{d as J}from"./chunk-GL6L4LFW.js";import{a as Q,b as X,c as Y,d as Z}from"./chunk-ARAMI27Y.js";import"./chunk-SGYCFQGT.js";import{a as q}from"./chunk-JNRADKRC.js";import{a as K}from"./chunk-TREHUASH.js";import{a as U,b as G,j as V,k as L}from"./chunk-VSZ73G52.js";import{c as b,e as B,f as P,g as j,i as y,k as A,l as N,m as $,o as R}from"./chunk-SBAQOAMS.js";import"./chunk-ZUUGFAON.js";import{E as z,F as H}from"./chunk-LU4QPUQU.js";import{$ as w,Eb as l,Fb as E,Hb as T,Ka as a,Pa as _,Va as g,W,Za as M,aa as O,eb as s,jb as D,kb as f,lb as c,mb as d,nb as o,ob as r,oc as F,pb as p,vb as v,wb as u,xc as I}from"./chunk-W7RDRLIT.js";var C=class i{constructor(t){this.dialogData=t;this.initForm(),this.dialogData&&this.data.patchValue(this.dialogData)}dialogRef=O(Q);data;startTime;endTime;day;dayOfWeekOptions=Object.values(x).filter(t=>isNaN(Number(t))).map(t=>({label:t,value:x[t]}));initForm(){this.startTime=new y("",{nonNullable:!0}),this.endTime=new y("",{nonNullable:!1,validators:[b.required]}),this.day=new y("",{nonNullable:!0,validators:[b.required]}),this.data=new j({startTime:this.startTime,endTime:this.endTime,day:this.day})}onNoClick(){this.dialogRef.close()}submit(){if(this.data.valid){let t=this.data.value;this.dialogRef.close(t)}else this.data.markAllAsTouched()}static \u0275fac=function(e){return new(e||i)(_(X))};static \u0275cmp=g({type:i,selectors:[["app-add-work-time-dialog"]],decls:11,vars:4,consts:[[1,"d-flex","justify-content-center","containe"],[1,"shadow","p-3","bg-body-tertiary","rounded-2","p-4",3,"formGroup"],[1,"full-name-continer"],["icon","account_circle","label","Start Time","type","time","formControlName","startTime",3,"control"],["icon","account_circle","label","End Time","type","time","formControlName","endTime",3,"control"],["formControlName","day","label","Day","icon","work",3,"options"],["mat-dialog-actions","",1,"button-container"],["mat-button","",1,"secondery-btn",3,"click"],["mat-button","","cdkFocusInitial","",1,"secondery-btn","prim-color",3,"click"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"form",1)(2,"div",2),p(3,"app-custom-input",3)(4,"app-custom-input",4)(5,"app-custom-select",5),r(),o(6,"div",6)(7,"button",7),v("click",function(){return n.onNoClick()}),l(8,"Cancel"),r(),o(9,"button",8),v("click",function(){return n.submit()}),l(10,"Ok"),r()()()()),e&2&&(a(),s("formGroup",n.data),a(2),s("control",n.startTime),a(),s("control",n.endTime),a(),s("options",n.dayOfWeekOptions))},dependencies:[R,A,B,P,N,$,U,G,V,H,L,K,Z],styles:["form[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#f9f9ff}.containe[_ngcontent-%COMP%]{height:100%;align-items:center;justify-content:center}.full-name-continer[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;column-gap:10px}.contact-continer[_ngcontent-%COMP%], .info-continer[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;column-gap:15px}.secondery-btn[_ngcontent-%COMP%]{border:none;background-color:#fff;color:#333;width:100px;height:45px;display:flex;justify-content:center;border-radius:50px;margin:0 5px}.prim-color[_ngcontent-%COMP%]{background-color:#0b8fac;color:#fff}.prim-color[_ngcontent-%COMP%]:hover{background-color:#7bc1b7}"]})};var h=class i{constructor(t){this.http=t}baseUrl=q.apiUrl;Add(t){return this.http.post(`${this.baseUrl}/clinic/job-time`,t)}update(t){return this.http.put(`${this.baseUrl}/clinic/job-time`,t)}delete(t){return this.http.delete(`${this.baseUrl}/clinic/job-time/${t}`)}getAll(){return this.http.get(`${this.baseUrl}/clinic/job-time`)}static \u0275fac=function(e){return new(e||i)(w(I))};static \u0275prov=W({token:i,factory:i.\u0275fac,providedIn:"root"})};var k=(i,t)=>t.id;function le(i,t){if(i&1&&(o(0,"div",5),l(1),r()),i&2){let e=t.$implicit;a(),E(e)}}function me(i,t){i&1&&p(0,"div",10)}function ce(i,t){if(i&1&&(o(0,"div",11),l(1),r()),i&2){let e=t.$implicit,n=u(2);s("ngStyle",n.calculateTimeBlockStyle(e.startTime,e.endTime))("title",e.startTime+" - "+e.endTime),a(),T(" ",e.startTime," - ",e.endTime," ")}}function de(i,t){i&1&&p(0,"div",10)}function se(i,t){if(i&1&&(o(0,"div",11),l(1),r()),i&2){let e=t.$implicit,n=u(2);s("ngStyle",n.calculateTimeBlockStyle(e.startTime,e.endTime))("title",e.startTime+" - "+e.endTime),a(),T(" ",e.startTime," - ",e.endTime," ")}}function pe(i,t){i&1&&p(0,"div",10)}function fe(i,t){if(i&1&&(o(0,"div",11),l(1),r()),i&2){let e=t.$implicit,n=u(2);s("ngStyle",n.calculateTimeBlockStyle(e.startTime,e.endTime))("title",e.startTime+" - "+e.endTime),a(),T(" ",e.startTime," - ",e.endTime," ")}}function ue(i,t){i&1&&p(0,"div",10)}function Te(i,t){if(i&1&&(o(0,"div",11),l(1),r()),i&2){let e=t.$implicit,n=u(2);s("ngStyle",n.calculateTimeBlockStyle(e.startTime,e.endTime))("title",e.startTime+" - "+e.endTime),a(),T(" ",e.startTime," - ",e.endTime," ")}}function ke(i,t){i&1&&p(0,"div",10)}function _e(i,t){if(i&1&&(o(0,"div",11),l(1),r()),i&2){let e=t.$implicit,n=u(2);s("ngStyle",n.calculateTimeBlockStyle(e.startTime,e.endTime))("title",e.startTime+" - "+e.endTime),a(),T(" ",e.startTime," - ",e.endTime," ")}}function ve(i,t){i&1&&p(0,"div",10)}function xe(i,t){if(i&1&&(o(0,"div",11),l(1),r()),i&2){let e=t.$implicit,n=u(2);s("ngStyle",n.calculateTimeBlockStyle(e.startTime,e.endTime))("title",e.startTime+" - "+e.endTime),a(),T(" ",e.startTime," - ",e.endTime," ")}}function ge(i,t){i&1&&p(0,"div",10)}function ye(i,t){if(i&1&&(o(0,"div",11),l(1),r()),i&2){let e=t.$implicit,n=u(2);s("ngStyle",n.calculateTimeBlockStyle(e.startTime,e.endTime))("title",e.startTime+" - "+e.endTime),a(),T(" ",e.startTime," - ",e.endTime," ")}}function Ce(i,t){if(i&1&&(o(0,"div",7)(1,"div",8),l(2,"Sunday"),r(),o(3,"div",9),c(4,me,1,0,"div",10,f),c(6,ce,2,4,"div",11,k),r()(),o(8,"div",7)(9,"div",8),l(10,"Monday"),r(),o(11,"div",9),c(12,de,1,0,"div",10,f),c(14,se,2,4,"div",11,k),r()(),o(16,"div",7)(17,"div",8),l(18,"Tuesday"),r(),o(19,"div",9),c(20,pe,1,0,"div",10,f),c(22,fe,2,4,"div",11,k),r()(),o(24,"div",7)(25,"div",8),l(26,"Wednesday"),r(),o(27,"div",9),c(28,ue,1,0,"div",10,f),c(30,Te,2,4,"div",11,k),r()(),o(32,"div",7)(33,"div",8),l(34,"Thursday"),r(),o(35,"div",9),c(36,ke,1,0,"div",10,f),c(38,_e,2,4,"div",11,k),r()(),o(40,"div",7)(41,"div",8),l(42,"Friday"),r(),o(43,"div",9),c(44,ve,1,0,"div",10,f),c(46,xe,2,4,"div",11,k),r()(),o(48,"div",7)(49,"div",8),l(50,"Saturday"),r(),o(51,"div",9),c(52,ge,1,0,"div",10,f),c(54,ye,2,4,"div",11,k),r()()),i&2){let e=u();a(4),d(e.hours),a(2),d(e.filterByDay(e.DayOfWeek.Sunday)),a(6),d(e.hours),a(2),d(e.filterByDay(e.DayOfWeek.Monday)),a(6),d(e.hours),a(2),d(e.filterByDay(e.DayOfWeek.Tuesday)),a(6),d(e.hours),a(2),d(e.filterByDay(e.DayOfWeek.Wednesday)),a(6),d(e.hours),a(2),d(e.filterByDay(e.DayOfWeek.Thursday)),a(6),d(e.hours),a(2),d(e.filterByDay(e.DayOfWeek.Friday)),a(6),d(e.hours),a(2),d(e.filterByDay(e.DayOfWeek.Saturday))}}function he(i,t){i&1&&(o(0,"div",6),l(1,"Loading work times..."),r())}var te=class i{constructor(t,e,n){this.workTimeServices=t;this.dialog=e;this.snackBar=n;for(let m=6;m<=23;m++)this.hours.push(m<10?`0${m}:00`:`${m}:00`);for(let m=0;m<=5;m++)this.hours.push(m<10?`0${m}:00`:`${m}:00`)}Add(){this.dialog.open(C,{width:"70vw",maxWidth:"3000px",height:"80vh",maxHeight:"3000px",data:{}}).afterClosed().subscribe(e=>{e?this.workTimeServices.Add(e).subscribe({next:n=>{this.snackBar.open("refersh please")},error:n=>{console.log(n)}}):console.log("Dialog was cancelled")})}workTimes;DayOfWeek=x;hours=[];ngOnInit(){this.workTimeServices.getAll().subscribe({next:t=>{this.workTimes=t.data},error:t=>{console.log(t.message)}})}filterByDay(t){return this.workTimes.filter(e=>e.day===t)}calculateTimeBlockStyle(t,e){let n=this.parseTimeToDecimal(t),m=this.parseTimeToDecimal(e),ie=6,S=24-0,ne=(n-ie)/S*100,oe=(m-n)/S*100;return{left:`${ne}%`,width:`${oe}%`}}parseTimeToDecimal(t){let[e,n]=t.split(":").map(Number);return e+n/60}exportToCSV(){let t=this.convertToCSV(this.workTimes),e=new Blob([t],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a"),m=URL.createObjectURL(e);n.setAttribute("href",m),n.setAttribute("download","work-times.csv"),document.body.appendChild(n),n.click(),document.body.removeChild(n)}convertToCSV(t){return[Object.keys(t[0])].concat(t).map(n=>Object.values(n).map(m=>typeof m=="object"?JSON.stringify(m):`"${m}"`).join(",")).join(`\r
`)}static \u0275fac=function(e){return new(e||i)(_(h),_(Y),_(J))};static \u0275cmp=g({type:i,selectors:[["app-work-time"]],decls:17,vars:1,consts:[[1,"px-4","feat-container"],[1,"secondery-btn",3,"click"],[1,"secondery-btn","prim-color",3,"click"],[1,"work-time-container"],[1,"timeline-header"],[1,"hour-marker"],[1,"loading"],[1,"day-row"],[1,"day-label"],[1,"timeline"],[1,"hour-block"],[1,"time-block",3,"ngStyle","title"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"button",1),v("click",function(){return n.exportToCSV()}),o(2,"mat-icon"),l(3,"ios_share"),r(),o(4,"span"),l(5,"Export"),r()(),o(6,"button",2),v("click",function(){return n.Add()}),o(7,"mat-icon"),l(8,"add"),r(),o(9,"span"),l(10,"Add"),r()()(),o(11,"div",3)(12,"div",4),c(13,le,2,1,"div",5,f),r(),M(15,Ce,56,0)(16,he,2,0,"div",6),r()),e&2&&(a(13),d(n.hours),a(2),D(n.workTimes?15:16))},dependencies:[F,z],styles:[".work-time-container[_ngcontent-%COMP%]{margin:20px 20px 20px 0;width:90%}.timeline-header[_ngcontent-%COMP%]{display:flex;height:30px;margin-left:100px;border-bottom:1px solid #ddd}.hour-marker[_ngcontent-%COMP%]{flex:1;text-align:center;font-size:15px;font-weight:700;color:#666}.day-row[_ngcontent-%COMP%]{display:flex;height:60px;margin-bottom:10px;position:relative}.day-label[_ngcontent-%COMP%]{width:100px;display:flex;align-items:center;justify-content:center;font-weight:700;background-color:#fff;border-radius:4px 0 0 4px;color:#000;font-size:17px;border:1px solid #0B8FAC;border-right:0px}.timeline[_ngcontent-%COMP%]{flex:1;position:relative;display:flex;border:1px solid #0B8FAC;background-color:#fff;border-radius:0 4px 4px 0}.hour-block[_ngcontent-%COMP%]{flex:1;border-right:1px dashed #eee;height:100%}.hour-block[_ngcontent-%COMP%]:last-child{border-right:none}.time-block[_ngcontent-%COMP%]{position:absolute;height:40px;top:10px;background-color:#0b8fac;color:#fff;border-radius:4px;display:flex;align-items:center;justify-content:center;font-size:14px;padding:0 8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;box-shadow:0 2px 4px #0000001a;transition:all .2s ease}.time-block[_ngcontent-%COMP%]:hover{background-color:#4285f4;box-shadow:0 4px 8px #0003;z-index:10}.timeline[_ngcontent-%COMP%] > .time-block[_ngcontent-%COMP%]:nth-child(2n){top:5px}.timeline[_ngcontent-%COMP%] > .time-block[_ngcontent-%COMP%]:nth-child(odd){top:15px}.loading[_ngcontent-%COMP%]{padding:20px;text-align:center;color:#666}@media (max-width: 768px){.timeline-header[_ngcontent-%COMP%]{margin-left:60px}.day-label[_ngcontent-%COMP%]{width:60px;font-size:12px}.time-block[_ngcontent-%COMP%]{font-size:10px}}"]})};export{te as WorkTimeComponent};
