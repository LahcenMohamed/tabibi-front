import{a as ee,b as te,c as oe,d as ne,e as ie,f as re,g as le,h as ae,i as me,j as se,l as ce,m as pe}from"./chunk-6BNWLXE4.js";import{a as de,b as ue,c as fe,d as ye}from"./chunk-ARAMI27Y.js";import"./chunk-SGYCFQGT.js";import{a as Y}from"./chunk-JNRADKRC.js";import{a as Z}from"./chunk-TREHUASH.js";import{a as W,b as z,j as J,k as X}from"./chunk-VSZ73G52.js";import{b as F,c as x,e as T,f as A,g as H,i as b,j as U,k as $,l as q,m as B,n as L,o as G}from"./chunk-SBAQOAMS.js";import"./chunk-ZUUGFAON.js";import{E as K,F as Q}from"./chunk-LU4QPUQU.js";import{$ as O,Eb as a,Gb as N,Jb as j,Ka as m,Kb as R,Lb as I,Pa as w,Va as M,W as D,Za as _,aa as V,eb as p,ha as f,ia as y,nb as r,ob as l,pb as E,qb as C,rb as h,tb as g,vb as s,wb as u,xc as P}from"./chunk-W7RDRLIT.js";var v=(c=>(c[c.Doctor=0]="Doctor",c[c.Nurse=1]="Nurse",c[c.NursingAssistant=2]="NursingAssistant",c[c.Receptionist=3]="Receptionist",c[c.Janitor=4]="Janitor",c[c.Other=5]="Other",c))(v||{});var S=class n{constructor(e){this.dialogData=e;this.initForm(),this.dialogData&&this.data.patchValue(this.dialogData)}dialogRef=V(de);data;firstName;middelName;lastName;phoneNumber;email;address;salary;jobType;description;jobTypeOptions=Object.keys(v).filter(e=>isNaN(Number(e))).map(e=>({label:e,value:v[e]}));initForm(){this.firstName=new b("",{nonNullable:!0,validators:[x.required]}),this.middelName=new b("",{nonNullable:!1}),this.lastName=new b("",{nonNullable:!0,validators:[x.required]}),this.phoneNumber=new b("",{nonNullable:!0,validators:[x.required]}),this.email=new b("",{nonNullable:!1,validators:[x.email]}),this.address=new b("",{nonNullable:!1}),this.salary=new b(0,{nonNullable:!0,validators:[x.min(0)]}),this.jobType=new b(null,{validators:[x.required]}),this.description=new b("",{nonNullable:!1}),this.data=new H({firstName:this.firstName,middelName:this.middelName,lastName:this.lastName,phoneNumber:this.phoneNumber,email:this.email,address:this.address,salary:this.salary,jobType:this.jobType,description:this.description})}onNoClick(){this.dialogRef.close()}submit(){if(this.data.valid){let e=this.data.value;this.dialogRef.close(e)}else this.data.markAllAsTouched()}static \u0275fac=function(t){return new(t||n)(w(ue))};static \u0275cmp=M({type:n,selectors:[["app-create-employee-dialog"]],decls:20,vars:10,consts:[[1,"d-flex","justify-content-center","containe"],[1,"shadow","p-3","bg-body-tertiary","rounded-2","p-4",3,"formGroup"],[1,"full-name-continer"],["icon","account_circle","label","First Name","formControlName","firstName",3,"control"],["icon","account_circle","label","Middel Name","formControlName","middelName",3,"control"],["icon","account_circle","label","Last Name","formControlName","lastName",3,"control"],[1,"info-continer"],["formControlName","jobType","label","Job Type","icon","work",3,"options"],["icon","location_on","label","Address","formControlName","address",3,"control"],["icon","phone","label","Phone Number","type","number","formControlName","phoneNumber",3,"control"],["icon","email","label","Email","type","email","formControlName","email",3,"control"],["icon","money","label","Salary","type","number","formControlName","salary",3,"control"],["icon","notes","label","Description","formControlName","description",3,"control"],["mat-dialog-actions","",1,"button-container"],["mat-button","",1,"secondery-btn",3,"click"],["mat-button","","cdkFocusInitial","",1,"secondery-btn","prim-color",3,"click"]],template:function(t,o){t&1&&(r(0,"div",0)(1,"form",1)(2,"div",2),E(3,"app-custom-input",3)(4,"app-custom-input",4)(5,"app-custom-input",5),l(),r(6,"div",6),E(7,"app-custom-select",7)(8,"app-custom-input",8),l(),r(9,"div",6),E(10,"app-custom-input",9)(11,"app-custom-input",10),l(),r(12,"div",6),E(13,"app-custom-input",11)(14,"app-custom-input",12),l(),r(15,"div",13)(16,"button",14),s("click",function(){return o.onNoClick()}),a(17,"Cancel"),l(),r(18,"button",15),s("click",function(){return o.submit()}),a(19,"Ok"),l()()()()),t&2&&(m(),p("formGroup",o.data),m(2),p("control",o.firstName),m(),p("control",o.middelName),m(),p("control",o.lastName),m(2),p("options",o.jobTypeOptions),m(),p("control",o.address),m(2),p("control",o.phoneNumber),m(),p("control",o.email),m(2),p("control",o.salary),m(),p("control",o.description))},dependencies:[G,$,T,A,q,B,W,z,J,Q,X,Z,ye],styles:["form[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#f9f9ff}.containe[_ngcontent-%COMP%]{height:100%;align-items:center;justify-content:center}.full-name-continer[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;column-gap:10px}.contact-continer[_ngcontent-%COMP%], .info-continer[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;column-gap:15px}.secondery-btn[_ngcontent-%COMP%]{border:none;background-color:#fff;color:#333;width:100px;height:45px;display:flex;justify-content:center;border-radius:50px;margin:0 5px}.prim-color[_ngcontent-%COMP%]{background-color:#0b8fac;color:#fff}.prim-color[_ngcontent-%COMP%]:hover{background-color:#7bc1b7}"]})};var k=class n{constructor(e){this.http=e}baseUrl=Y.apiUrl;createEmployee(e){return this.http.post(`${this.baseUrl}/employees`,e)}update(e){return this.http.put(`${this.baseUrl}/employees`,e)}delete(e){return this.http.delete(`${this.baseUrl}/employees/${e}`)}getAll(){return this.http.get(`${this.baseUrl}/employees`)}static \u0275fac=function(t){return new(t||n)(O(P))};static \u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})};function Ee(n,e){if(n&1){let t=g();r(0,"th",22)(1,"button",3),s("click",function(){f(t);let i=u();return y(i.sortBy("firstName"))}),a(2,"First Name "),l()()}}function Ne(n,e){if(n&1&&(r(0,"td",23),a(1),l()),n&2){let t=e.$implicit;m(),N(" ",t.firstName," ")}}function xe(n,e){if(n&1){let t=g();r(0,"th",22)(1,"button",3),s("click",function(){f(t);let i=u();return y(i.sortBy("lastName"))}),a(2,"Last Name"),l()()}}function ve(n,e){if(n&1&&(r(0,"td",23),a(1),l()),n&2){let t=e.$implicit;m(),N(" ",t.lastName," ")}}function we(n,e){if(n&1){let t=g();r(0,"th",22)(1,"button",3),s("click",function(){f(t);let i=u();return y(i.sortBy("phoneNumber"))}),a(2,"Phone"),l()()}}function Se(n,e){if(n&1&&(r(0,"td",23),a(1),l()),n&2){let t=e.$implicit;m(),N(" ",t.phoneNumber," ")}}function Me(n,e){if(n&1){let t=g();r(0,"th",22)(1,"button",3),s("click",function(){f(t);let i=u();return y(i.sortBy("email"))}),a(2,"Email"),l()()}}function Te(n,e){if(n&1&&(r(0,"td",23),a(1),l()),n&2){let t=e.$implicit;m(),N(" ",t.email||"-"," ")}}function ke(n,e){if(n&1){let t=g();r(0,"th",22)(1,"button",3),s("click",function(){f(t);let i=u();return y(i.sortBy("address"))}),a(2,"Address"),l()()}}function De(n,e){if(n&1&&(r(0,"td",23),a(1),l()),n&2){let t=e.$implicit;m(),N(" ",t.address||"-"," ")}}function Oe(n,e){if(n&1){let t=g();r(0,"th",22)(1,"button",3),s("click",function(){f(t);let i=u();return y(i.sortBy("salary"))}),a(2,"Salary"),l()()}}function Ve(n,e){if(n&1&&(r(0,"td",23),a(1),l()),n&2){let t=e.$implicit;m(),N(" ",t.salary," ")}}function je(n,e){if(n&1){let t=g();r(0,"th",22)(1,"button",3),s("click",function(){f(t);let i=u();return y(i.sortBy("jobType"))}),a(2,"Job Type"),l()()}}function Re(n,e){if(n&1&&(r(0,"td",23),a(1),l()),n&2){let t=e.$implicit,o=u();m(),N(" ",o.getJobTypeName(t.jobType)," ")}}function Ie(n,e){n&1&&(r(0,"th",22),a(1," Action "),l())}function Pe(n,e){if(n&1){let t=g();r(0,"td",24)(1,"div",25)(2,"button",26),s("click",function(){let i=f(t).$implicit,d=u();return y(d.Update(i))}),r(3,"mat-icon"),a(4,"edit"),l()(),r(5,"button",27),s("click",function(){let i=f(t).$implicit,d=u();return y(d.delete(i.id))}),r(6,"mat-icon"),a(7,"delete"),l()()()()}}function Fe(n,e){n&1&&E(0,"tr",28)}function Ae(n,e){n&1&&E(0,"tr",29)}var be=class n{constructor(e,t){this._employeeService=e;this.dialog=t;let o=localStorage.getItem("token");console.log(o)}searchItem;employees;filteredEmployees=new pe;employeesHeaders=["firstName","lastName","phoneNumber","email","salary","jobType","actions"];search(){let e=this.searchItem.toLowerCase();this.filteredEmployees.data=this.employees.filter(t=>t.firstName.toLowerCase().includes(e))}delete(e){this._employeeService.delete(e).subscribe({next:t=>{console.log("object")},error:t=>{console.log(t)}})}Update(e){this.dialog.open(S,{width:"70vw",maxWidth:"3000px",height:"80vh",maxHeight:"3000px",data:e||null}).afterClosed().subscribe(o=>{if(o){let i={id:e.id,fullName:{firstName:o.firstName,middelName:o.middelName,lastName:o.lastName},phoneNumber:o.phoneNumber,email:o.email,address:o.address,salary:o.salary,jobType:o.jobType,description:o.description};this._employeeService.update(i).subscribe({next:d=>{},error:d=>{console.log(d)}})}else console.log("Dialog was cancelled")})}Add(){this.dialog.open(S,{width:"70vw",maxWidth:"3000px",height:"80vh",maxHeight:"3000px",data:{}}).afterClosed().subscribe(t=>{if(t){console.log("New employee data:",t);let o={fullName:{firstName:t.firstName,middelName:t.middelName,lastName:t.lastName},phoneNumber:t.phoneNumber,email:t.email,address:t.address,salary:t.salary,jobType:t.jobType,description:t.description};this._employeeService.createEmployee(o).subscribe({next:i=>{this.filteredEmployees.data=[...this.filteredEmployees.data,t]},error:i=>{console.log(i)}})}else console.log("Dialog was cancelled")})}JobType=v;getJobTypeName(e){return v[e]}onInputChange(e){throw new Error("Method not implemented.")}ngOnInit(){this._employeeService.getAll().subscribe({next:e=>{this.employees=e.data,this.filteredEmployees.data=[...this.employees]},error:e=>{console.log(e.message)}})}exportToCSV(){let e=this.convertToCSV(this.filteredEmployees.data),t=new Blob([e],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),i=URL.createObjectURL(t);o.setAttribute("href",i),o.setAttribute("download","employees.csv"),document.body.appendChild(o),o.click(),document.body.removeChild(o)}convertToCSV(e){return[Object.keys(e[0])].concat(e).map(o=>Object.values(o).map(i=>typeof i=="object"?JSON.stringify(i):`"${i}"`).join(",")).join(`\r
`)}sortDirection="asc";sortBy(e){let t=this.sortDirection==="asc"?1:-1;this.filteredEmployees.data=[...this.filteredEmployees.data].sort((o,i)=>{let d=this.getNestedValue(o,e),c=this.getNestedValue(i,e);return d==null?1:c==null?-1:d.toString().localeCompare(c.toString())*t}),this.sortDirection=this.sortDirection==="asc"?"desc":"asc"}getNestedValue(e,t){return t.split(".").reduce((o,i)=>o&&o[i],e)}static \u0275fac=function(t){return new(t||n)(w(k),w(fe))};static \u0275cmp=M({type:n,selectors:[["app-employee"]],decls:47,vars:4,consts:[[1,"d-flex","justify-content-between"],[1,"input-container"],["type","text","placeholder","Search",3,"ngModelChange","ngModel"],[3,"click"],[1,"px-4","feat-container"],[1,"secondery-btn",3,"click"],[1,"secondery-btn","prim-color",3,"click"],[1,"table-continer"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","firstName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","lastName"],["matColumnDef","phoneNumber"],["matColumnDef","email"],["matColumnDef","address"],["matColumnDef","salary"],["matColumnDef","jobType"],["matColumnDef","actions"],["mat-cell","","class","action-buttons-cell",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"action-buttons-cell"],[1,"action-buttons-container"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,o){t&1&&(r(0,"h1"),a(1,"employees"),l(),r(2,"div",0)(3,"div",1)(4,"input",2),I("ngModelChange",function(d){return R(o.searchItem,d)||(o.searchItem=d),d}),l(),r(5,"button",3),s("click",function(){return o.search()}),r(6,"mat-icon"),a(7,"search"),l()()(),r(8,"div",4)(9,"button",5),s("click",function(){return o.exportToCSV()}),r(10,"mat-icon"),a(11,"ios_share"),l(),r(12,"span"),a(13,"Export"),l()(),r(14,"button",6),s("click",function(){return o.Add()}),r(15,"mat-icon"),a(16,"add"),l(),r(17,"span"),a(18,"Add"),l()()()(),r(19,"div",7)(20,"table",8),C(21,9),_(22,Ee,3,0,"th",10)(23,Ne,2,1,"td",11),h(),C(24,12),_(25,xe,3,0,"th",10)(26,ve,2,1,"td",11),h(),C(27,13),_(28,we,3,0,"th",10)(29,Se,2,1,"td",11),h(),C(30,14),_(31,Me,3,0,"th",10)(32,Te,2,1,"td",11),h(),C(33,15),_(34,ke,3,0,"th",10)(35,De,2,1,"td",11),h(),C(36,16),_(37,Oe,3,0,"th",10)(38,Ve,2,1,"td",11),h(),C(39,17),_(40,je,3,0,"th",10)(41,Re,2,1,"td",11),h(),C(42,18),_(43,Ie,2,0,"th",10)(44,Pe,8,0,"td",19),h(),_(45,Fe,1,0,"tr",20)(46,Ae,1,0,"tr",21),l()()),t&2&&(m(4),j("ngModel",o.searchItem),m(16),p("dataSource",o.filteredEmployees),m(25),p("matHeaderRowDef",o.employeesHeaders),m(),p("matRowDefColumns",o.employeesHeaders))},dependencies:[K,ce,ee,oe,le,ne,te,ae,ie,re,me,se,L,F,T,U],styles:["h1[_ngcontent-%COMP%]{color:#0b8fac}.input-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:50px;width:400px;display:flex;justify-content:center;align-items:center;padding:5px}.input-icon[_ngcontent-%COMP%]{position:absolute;left:12px;color:#ccc;font-size:16px}input[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:17px;height:30px;border:none;border-radius:0}input[_ngcontent-%COMP%]:focus{outline:none}input[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;cursor:not-allowed}.table-continer[_ngcontent-%COMP%]{border-radius:42px;padding:20px;background-color:#fff;margin-top:20px}.table-continer[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{background-color:transparent}.table-continer[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .5s ease}.table-continer[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#7bc1b7}.action-buttons-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:4px}.action-buttons-cell[_ngcontent-%COMP%]{padding:0 8px}"]})};export{be as EmployeeComponent};
