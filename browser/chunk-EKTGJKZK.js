import{a as Q}from"./chunk-2MOPF4YC.js";import{a as E,c as R}from"./chunk-HLW4GTBQ.js";import{a as $,b as H,c as j,d as V,e as z,f as U,g as q,h as F,i as G,j as B,k as J,l as K}from"./chunk-6BNWLXE4.js";import{c as L}from"./chunk-ARAMI27Y.js";import"./chunk-SGYCFQGT.js";import{a as N}from"./chunk-JNRADKRC.js";import{n as y}from"./chunk-SBAQOAMS.js";import"./chunk-ZUUGFAON.js";import{E as k,F as T}from"./chunk-LU4QPUQU.js";import{$ as w,Eb as r,Gb as f,Ka as p,Pa as u,Va as A,W as P,Za as m,eb as h,ha as C,hb as M,ia as g,nb as i,ob as o,pb as v,qb as c,rb as l,rc as D,tb as O,vb as x,wb as _,xc as I}from"./chunk-W7RDRLIT.js";var S=(a=>(a[a.Canceld=0]="Canceld",a[a.Panding=1]="Panding",a[a.Confirmed=2]="Confirmed",a))(S||{});var b=class e{constructor(t){this.http=t}baseUrl=N.apiUrl;getAll(t){return this.http.get(`${this.baseUrl}/Appointment/${t}`)}confirm(t){return this.http.patch(`${this.baseUrl}/Appointment/confirm/${t}`,null)}cancel(t){return this.http.patch(`${this.baseUrl}/Appointment/cancel/${t}`,null)}static \u0275fac=function(n){return new(n||e)(w(I))};static \u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})};function tt(e,t){e&1&&(i(0,"th",14),r(1," No. "),o())}function et(e,t){if(e&1&&(i(0,"td",15),r(1),o()),e&2){let n=t.$implicit;p(),f(" ",n.number," ")}}function nt(e,t){e&1&&(i(0,"th",14),r(1," Patient "),o())}function it(e,t){if(e&1&&(i(0,"td",15),r(1),o()),e&2){let n=t.$implicit;p(),f(" ",n.patient.fullName," ")}}function ot(e,t){e&1&&(i(0,"th",14),r(1," Phone "),o())}function at(e,t){if(e&1&&(i(0,"td",15),r(1),o()),e&2){let n=t.$implicit;p(),f(" ",n.patient.phoneNumber||"N/A"," ")}}function rt(e,t){e&1&&(i(0,"th",14),r(1," Gender "),o())}function pt(e,t){if(e&1&&(i(0,"td",15)(1,"mat-icon"),r(2),o()()),e&2){let n=t.$implicit;p(),M(n.patient.gender===0?"male":"female"),p(),f(" ",n.patient.gender===0?"male":"female"," ")}}function mt(e,t){e&1&&(i(0,"th",14),r(1," Status "),o())}function ct(e,t){if(e&1&&(i(0,"td",15)(1,"span",16),r(2),o()()),e&2){let n=t.$implicit,a=_();p(),M(a.getStatusClass(n.status)),p(),f(" ",a.AppointmentStatus[n.status]," ")}}function lt(e,t){e&1&&(i(0,"th",14),r(1," Details "),o())}function st(e,t){if(e&1){let n=O();i(0,"td",17)(1,"div",18)(2,"button",19),x("click",function(){let s=C(n).$implicit,d=_();return g(d.confirm(s.id))}),i(3,"mat-icon",20),r(4,"check"),o()(),i(5,"button",19),x("click",function(){let s=C(n).$implicit,d=_();return g(d.cancel(s.id))}),i(6,"mat-icon",21),r(7,"cancel"),o()(),i(8,"button",22),x("click",function(){let s=C(n).$implicit,d=_();return g(d.openDetails(s))}),i(9,"mat-icon"),r(10,"info"),o()()()()}}function dt(e,t){e&1&&v(0,"tr",23)}function ut(e,t){e&1&&v(0,"tr",24)}function ft(e,t){e&1&&(i(0,"tr",25)(1,"td",26),r(2,"No appointments found"),o()())}var W=class e{constructor(t,n,a,s,d){this.appointmentService=t;this.dialog=n;this.route=a;this.patientSerivce=s;this.router=d;this.route.queryParams.subscribe(X=>{this.workScheduleId=X.workScheduleId,this.workScheduleId?this.loadAppointments():console.error("Missing workScheduleId query param")})}appointments=[];workScheduleId;displayedColumns=["number","patientName","phoneNumber","gender","status","actions"];AppointmentStatus=S;ngOnInit(){this.loadAppointments()}loadAppointments(){this.appointmentService.getAll(this.workScheduleId).subscribe({next:t=>{this.appointments=t.data},error:t=>{console.error("Error loading appointments:",t)}})}openDetails(t){this.patientSerivce.setData(t.patient),this.router.navigate(["patient"],{queryParams:{patientId:t.patient.id}})}getStatusClass(t){switch(t){case 2:return"status-confirmed";case 1:return"status-pending";case 0:return"status-cancelled";default:return""}}cancel(t){this.appointmentService.cancel(t).subscribe({next:n=>{this.loadAppointments()},error:n=>{console.error("Error cancelling appointment:",n)}})}confirm(t){this.appointmentService.confirm(t).subscribe({next:n=>{this.loadAppointments()},error:n=>{console.error("Error confirming appointment:",n)}})}static \u0275fac=function(n){return new(n||e)(u(b),u(L),u(E),u(Q),u(R))};static \u0275cmp=A({type:e,selectors:[["app-appointment"]],decls:25,vars:3,consts:[[1,"appointments-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","number"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","patientName"],["matColumnDef","phoneNumber"],["matColumnDef","gender"],["matColumnDef","status"],["matColumnDef","actions"],["mat-cell","","class","action-buttons-cell",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["mat-header-cell",""],["mat-cell",""],[1,"status-badge"],["mat-cell","",1,"action-buttons-cell"],[1,"action-buttons-container"],["mat-icon-button","",3,"click"],[2,"color","green"],[2,"color","red"],["mat-icon-button","",2,"color","yellow",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","5",1,"mat-cell"]],template:function(n,a){n&1&&(i(0,"div",0)(1,"h2"),r(2,"Appointments"),o(),i(3,"table",1),c(4,2),m(5,tt,2,0,"th",3)(6,et,2,1,"td",4),l(),c(7,5),m(8,nt,2,0,"th",3)(9,it,2,1,"td",4),l(),c(10,6),m(11,ot,2,0,"th",3)(12,at,2,1,"td",4),l(),c(13,7),m(14,rt,2,0,"th",3)(15,pt,3,3,"td",4),l(),c(16,8),m(17,mt,2,0,"th",3)(18,ct,3,3,"td",4),l(),c(19,9),m(20,lt,2,0,"th",3)(21,st,11,0,"td",10),l(),m(22,dt,1,0,"tr",11)(23,ut,1,0,"tr",12)(24,ft,3,0,"tr",13),o()()),n&2&&(p(3),h("dataSource",a.appointments),p(19),h("matHeaderRowDef",a.displayedColumns),p(),h("matRowDefColumns",a.displayedColumns))},dependencies:[D,T,k,K,$,j,q,V,H,F,z,U,G,B,J,y],styles:[".appointments-container[_ngcontent-%COMP%]{padding:20px}.appointments-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:20px}.appointments-container[_ngcontent-%COMP%]   .mat-elevation-z8[_ngcontent-%COMP%]{width:100%;box-shadow:0 2px 4px #0000001a;border-radius:8px;overflow:hidden}.appointments-container[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#333;font-weight:600;padding:16px}.appointments-container[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:16px}.appointments-container[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.appointments-container[_ngcontent-%COMP%]   .mat-icon.male[_ngcontent-%COMP%]{color:#1976d2}.appointments-container[_ngcontent-%COMP%]   .mat-icon.female[_ngcontent-%COMP%]{color:#e91e63}.appointments-container[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:16px;font-size:14px;font-weight:500;display:inline-block;text-transform:capitalize}.appointments-container[_ngcontent-%COMP%]   .status-confirmed[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#2e7d32}.appointments-container[_ngcontent-%COMP%]   .status-pending[_ngcontent-%COMP%]{background-color:#fff3e0;color:#ef6c00}.appointments-container[_ngcontent-%COMP%]   .status-cancelled[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828}.appointments-container[_ngcontent-%COMP%]   .mat-no-data-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:24px;text-align:center;color:#666}@media (max-width: 600px){.appointments-container[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%], .appointments-container[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:12px 8px;font-size:14px}.appointments-container[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:4px 8px;font-size:12px}}.action-buttons-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:4px}.action-buttons-cell[_ngcontent-%COMP%]{padding:0 8px}"]})};export{W as AppointmentComponent};
